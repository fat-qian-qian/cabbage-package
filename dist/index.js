"use strict";var e=require("react"),t=require("@chakra-ui/react"),n=require("@tanstack/react-table");function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}function a(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var l=function(n){var r=n.table;return e.createElement(t.Flex,{alignItems:"center"},e.createElement(t.Text,{mr:4},"每頁顯示"),e.createElement(t.Select,{w:"auto",value:r.getState().pagination.pageSize,onChange:function(e){return r.setPageSize(Number(e.target.value))}},[10,20,30,40,50].map((function(t){return e.createElement("option",{key:t,value:t},t)}))))},i={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},c=e.createContext&&e.createContext(i),u=function(){return u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},u.apply(this,arguments)},g=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};function s(t){return t&&t.map((function(t,n){return e.createElement(t.tag,u({key:n},t.attr),s(t.child))}))}function d(t){return function(n){return e.createElement(m,u({attr:u({},t.attr)},n),s(t.child))}}function m(t){var n=function(n){var r,a=t.attr,o=t.size,l=t.title,i=g(t,["attr","size","title"]),c=o||n.size||"1em";return n.className&&(r=n.className),t.className&&(r=(r?r+" ":"")+t.className),e.createElement("svg",u({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,a,i,{className:r,style:u(u({color:t.color||n.color},n.style),t.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),l&&e.createElement("title",null,l),t.children)};return void 0!==c?e.createElement(c.Consumer,null,(function(e){return n(e)})):n(i)}function f(e){return d({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"}}]})(e)}function p(e){return d({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M6 6h2v12H6zm3.5 6l8.5 6V6z"}}]})(e)}function v(e){return d({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}}]})(e)}function h(e){return d({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}}]})(e)}var b=function(n){var r=n.table;return console.log(r.getCanNextPage()),console.log(r.getCanPreviousPage()),e.createElement(t.Flex,{gap:0},e.createElement(t.Button,{rounded:"full",roundedRight:"none",colorScheme:r.getCanPreviousPage()?"teal":"gray",onClick:function(){return r.setPageIndex(0)},isDisabled:!r.getCanPreviousPage()},e.createElement(t.Icon,{as:p})),e.createElement(t.Button,{rounded:"none",colorScheme:r.getCanPreviousPage()?"teal":"gray",onClick:function(){r.getCanPreviousPage()&&r.previousPage()},isDisabled:!r.getCanPreviousPage()},e.createElement(t.Icon,{as:v})),e.createElement(t.Select,{w:"auto",onChange:function(e){return r.setPageIndex(Number(e.target.value))}},a(Array(r.getPageCount()).keys()).map((function(t){return e.createElement("option",{key:t,value:t},t+1," / ",r.getPageCount()," 頁")}))),e.createElement(t.Button,{rounded:"none",colorScheme:r.getCanNextPage()?"teal":"gray",onClick:function(){r.getCanNextPage()&&r.nextPage()},isDisabled:!r.getCanNextPage()},e.createElement(t.Icon,{as:h})),e.createElement(t.Button,{rounded:"full",roundedLeft:"none",colorScheme:r.getCanNextPage()?"teal":"gray",onClick:function(){return r.setPageIndex(r.getPageCount()-1)},isDisabled:!r.getCanNextPage()},e.createElement(t.Icon,{as:f})))};exports.DataTable=function(a){var o=a.columns,i=a.data;a.selectionMode,a.selection,a.onSelectionChange,a.dataKey;var c=a.tableStyle,u=void 0===c?{textAlign:"center",size:"sm",border:"1px",borderColor:"blackAlpha.900"}:c,g=a.thStyle,s=void 0===g?{border:"1px",textAlign:"center",borderColor:"blackAlpha.900",bg:"teal.400",color:"white",fontSize:"md"}:g,d=a.tdStyle,m=void 0===d?{border:"1px",borderColor:"blackAlpha.900",textAlign:"center"}:d,f=a.renderRowSubComponents,p=void 0===f?[]:f,v=a.customHeaders,h=void 0===v?[]:v,y=a.enablePagination,C=void 0!==y&&y,E=a.hasCaption,P=void 0!==E&&E,x=a.caption,w=void 0===x?"":x,S=n.useReactTable({columns:o,data:i,getCoreRowModel:n.getCoreRowModel(),getFilteredRowModel:n.getFilteredRowModel(),getPaginationRowModel:n.getPaginationRowModel(),debugTable:!0}),k=C?S.getPaginationRowModel().rows:S.getCoreRowModel().rows;return e.createElement(t.TableContainer,null,e.createElement(t.Table,u,P&&e.createElement(t.TableCaption,{placement:"top",bg:"blackAlpha.900",color:"white",fontSize:"md",p:3,mt:0},w),e.createElement(t.Thead,null,S.getHeaderGroups().map((function(a){return e.createElement(t.Tr,null,a.headers.map((function(a){return e.createElement(t.Th,r({},s,{key:a.id}),n.flexRender(a.column.columnDef.header,a.getContext()))})),h.map((function(n,a){return e.createElement(t.Th,r({},s,{key:"custom-header-".concat(a)}),n)})))}))),e.createElement(t.Tbody,null,k.map((function(a){return e.createElement(t.Tr,null,a.getVisibleCells().map((function(a){return e.createElement(t.Td,r({},m,{key:a.id}),n.flexRender(a.column.columnDef.cell,a.getContext()))})),p.map((function(n){return e.createElement(t.Td,m,n(a))})))})))),C&&e.createElement(t.Flex,{mt:4,textAlign:"center",alignItems:"center",justifyContent:"space-evenly"},e.createElement(l,{table:S}),e.createElement(b,{table:S})))};
