"use strict";var e=require("react"),t=require("@chakra-ui/react"),n=require("@chakra-ui/icons"),r=require("@tanstack/react-table"),o=require("react-icons/md");function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(this,arguments)}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,l,i=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(i.push(r.value),i.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var c=function(n){var r=n.table;return e.createElement(t.Flex,{alignItems:"center"},e.createElement(t.Text,{mr:4},"每頁顯示"),e.createElement(t.Select,{w:"auto",value:r.getState().pagination.pageSize,onChange:function(e){return r.setPageSize(Number(e.target.value))}},[10,20,30,40,50].map((function(t){return e.createElement("option",{key:t,value:t},t)}))))},u=function(n){var r=n.table;return console.log(r.getCanNextPage()),console.log(r.getCanPreviousPage()),e.createElement(t.Flex,{gap:0,w:"60%",placeContent:"center"},e.createElement(t.Button,{rounded:"full",roundedRight:"none",colorScheme:r.getCanPreviousPage()?"teal":"gray",onClick:function(){return r.setPageIndex(0)},isDisabled:!r.getCanPreviousPage()},e.createElement(t.Icon,{as:o.MdSkipPrevious})),e.createElement(t.Button,{rounded:"none",colorScheme:r.getCanPreviousPage()?"teal":"gray",onClick:function(){r.getCanPreviousPage()&&r.previousPage()},isDisabled:!r.getCanPreviousPage()},e.createElement(t.Icon,{as:o.MdNavigateBefore})),e.createElement(t.NumberInput,{w:"5vw",value:r.getState().pagination.pageIndex+1,min:1,max:r.getPageCount(),onChange:function(e){return r.setPageIndex(Number(e)-1)}},e.createElement(t.NumberInputField,{w:"100%",borderRadius:"none",textAlign:"center",padding:0,margin:0})),e.createElement(t.Input,{w:"5vw",borderRadius:"none",textAlign:"center",value:" / ".concat(r.getPageCount()," 頁"),isReadOnly:!0,bg:"gray.100"}),e.createElement(t.Button,{rounded:"none",colorScheme:r.getCanNextPage()?"teal":"gray",onClick:function(){r.getCanNextPage()&&r.nextPage()},isDisabled:!r.getCanNextPage()},e.createElement(t.Icon,{as:o.MdNavigateNext})),e.createElement(t.Button,{rounded:"full",roundedLeft:"none",colorScheme:r.getCanNextPage()?"teal":"gray",onClick:function(){return r.setPageIndex(r.getPageCount()-1)},isDisabled:!r.getCanNextPage()},e.createElement(t.Icon,{as:o.MdSkipNext})))};function g(n){var r,o,a,l,i=n.column;return"number"==typeof(null===(r=n.table.getPreFilteredRowModel().flatRows[0])||void 0===r?void 0:r.getValue(i.id))?e.createElement(t.Flex,{w:"100%"},e.createElement(t.Input,{size:"sm",mt:2,focusBorderColor:"#0044BB",textAlign:"center",bg:"white",textColor:"black",p:0,value:null!==(o=null===(a=i.getFilterValue())||void 0===a?void 0:a[0])&&void 0!==o?o:"",onChange:function(e){i.setFilterValue((function(t){return[e.target.value,null==t?void 0:t[1]]})),i.setFilterValue((function(t){return[null==t?void 0:t[0],e.target.value]}))},placeholder:"最小值"})):e.createElement(t.Input,{size:"sm",mt:2,focusBorderColor:"#0044BB",textAlign:"center",bg:"white",textColor:"black",p:0,value:null!==(l=i.getFilterValue())&&void 0!==l?l:"",onChange:function(e){return i.setFilterValue(e.target.value)},placeholder:"輸入以查詢"})}exports.DataTable=function(o){var i=o.columns,d=o.data,m=o.tableStyle,s=void 0===m?{textAlign:"center",size:"sm",border:"1px",borderColor:"blackAlpha.900"}:m,b=o.thStyle,f=void 0===b?{border:"1px",textAlign:"center",borderColor:"blackAlpha.900",bg:"teal.400",color:"white",fontSize:"md"}:b,p=o.tdStyle,v=void 0===p?{border:"1px",borderColor:"blackAlpha.900",textAlign:"center"}:p,C=o.renderRowSubComponents,h=void 0===C?[]:C,y=o.customHeaders,E=void 0===y?[]:y,x=o.enablePagination,w=void 0!==x&&x,P=o.enableCaption,S=void 0!==P&&P,k=o.enableFilter,I=void 0!==k&&k,R=o.enableRowDoubleClick,A=void 0!==R&&R,T=o.rowDoubleClickHandler,F=void 0===T?function(e){alert("Double Clicked Row ".concat(e.id))}:T,M=o.caption,N=void 0===M?"":M,B=l(e.useState([]),2),D=B[0],j=B[1],O=r.useReactTable({columns:i,data:d,state:{sorting:D},onSortingChange:j,getCoreRowModel:r.getCoreRowModel(),getFilteredRowModel:r.getFilteredRowModel(),getPaginationRowModel:r.getPaginationRowModel(),getSortedRowModel:r.getSortedRowModel(),debugTable:!0}),z=w?O.getPaginationRowModel().rows:O.getCoreRowModel().rows;return e.createElement(t.TableContainer,null,e.createElement(t.Table,s,S&&e.createElement(t.TableCaption,{placement:"top",bg:"blackAlpha.900",color:"white",fontSize:"md",p:3,mt:0},N),e.createElement(t.Thead,null,O.getHeaderGroups().map((function(o){return e.createElement(t.Tr,null,o.headers.map((function(o){return e.createElement(t.Th,a({},f,{key:o.id,cursor:"pointer"}),e.createElement(t.Flex,{alignItems:"center",justifyContent:"center",position:"relative",onClick:o.column.getToggleSortingHandler()},r.flexRender(o.column.columnDef.header,o.getContext()),e.createElement(t.IconButton,{"aria-label":"Sort",icon:{desc:e.createElement(n.ArrowDownIcon,null),asc:e.createElement(n.ArrowUpIcon,null),false:e.createElement(n.ArrowUpIcon,{opacity:.5})}[o.column.getIsSorted()],size:"xs",colorScheme:"black",position:"absolute",right:"0"})),I&&o.column.getCanFilter()?e.createElement("div",null,e.createElement(g,{column:o.column,table:O})):null)})),E.map((function(n,r){return e.createElement(t.Th,a({},f,{key:"custom-header-".concat(r)}),n)})))}))),e.createElement(t.Tbody,null,z.map((function(n){return e.createElement(t.Tr,{key:n.id,_hover:{bg:"gray.100"},onDoubleClick:function(){A&&F(n)}},n.getVisibleCells().map((function(n){return e.createElement(t.Td,a({},v,{key:n.id}),r.flexRender(n.column.columnDef.cell,n.getContext()))})),h.map((function(r){return e.createElement(t.Td,v,r(n))})))})))),w&&e.createElement(t.Flex,{mt:4,textAlign:"center",alignItems:"center",justifyContent:"space-evenly"},e.createElement(c,{table:O}),e.createElement(u,{table:O})))};
